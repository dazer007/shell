version: '2'
services:
  registry:
    image: registry:latest
    stdin_open: true
    volumes:
      - /usr/local/docker_volume/registry:/var/lib/registry
    tty: true
    ports:
      - 5000:5000/tcp
    labels:
      io.rancher.container.pull_image: always
  jenkins:
    privileged: true
    image: jenkins/jenkins:2.199-alpine
    stdin_open: true
    volumes:
      - /usr/local/jenkins_volume/jenkins_home:/var/jenkins_home
      - /usr/bin/docker:/var/bin/docker
      - /var/run/docker.sock:/var/run/docker.sock
      - /etc/alternatives/:/var/java
      - /etc/localtime:/etc/localtime
    tty: true
    ports:
      - 8989:8080/tcp
      - 30001:50000/tcp
    labels:
      io.rancher.container.pull_image: always
